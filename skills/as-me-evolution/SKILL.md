---
name: as-me-evolution
description: 查看原则和记忆的演化历史
---

# View Evolution History

查看原则的演化历史和时间线，追踪记忆如何随时间变化。

## 演化触发类型

- **new_evidence** (新证据): 新的记忆支持现有原则
- **conflict** (冲突证据): 发现与现有原则矛盾的证据
- **user_confirm** (用户确认): 用户确认原则正确
- **user_correct** (用户修正): 用户修正原则内容
- **time_decay** (时间衰减): 长时间未被触发导致置信度下降
- **aggregation** (记忆聚合): 从多个记忆聚合形成新原则

## 演化规则

1. **新证据**: 每条新的支持证据提升 1-5% 置信度
2. **冲突证据**: 可能降低置信度或触发原则分裂
3. **用户确认**: 提升 20% 置信度（上限 100%）
4. **用户修正**: 原则内容更新，置信度可能调整
5. **时间衰减**: 长时间未触发的原则置信度逐渐降低
6. **记忆聚合**: 相似记忆聚合时创建新原则

## 执行步骤

### Step 1: 读取演化历史

```bash
if [ -f ~/.as-me/evolution/history.json.gz ]; then
  gzip -dc ~/.as-me/evolution/history.json.gz
elif [ -f ~/.as-me/evolution/history.json ]; then
  cat ~/.as-me/evolution/history.json
else
  echo "[]"
fi
```

### Step 2: 支持的操作

**查看时间线**
- 按时间倒序展示所有演化事件
- 支持按触发类型过滤：`--trigger user_confirm`
- 支持限制数量：`--limit 20`

**查看特定原则历史**
- 显示指定原则的完整演化历程
- 按时间顺序展示置信度变化

**查看事件详情**
- 显示单个演化事件的完整信息

### Step 3: 展示结果

根据用户请求格式化输出。

## 输出格式示例

**时间线格式：**
```
共 5 条演化事件

[01-19 15:30] [abc123ef] [用户确认] ↑ 85% → 100%
[01-18 10:00] [def456ab] [新证据] ↑ 65% → 70%
[01-17 14:00] [abc123ef] [新证据] ↑ 80% → 85%
[01-16 09:00] [abc123ef] [记忆聚合] = 80%
[01-15 11:00] [ghi789cd] [用户修正] ≈ 75%
```

**原则演化历史格式：**
```
原则 abc123ef 的演化时间线

时间线:
------------------------------------------------------------
  2026-01-16 09:00:00
  │ 记忆聚合: 0% → 80%
  │ 从 5 条思维认知记忆聚合形成
  │
  2026-01-17 14:00:00
  │ 新证据: 80% → 85%
  │ 发现新的支持证据
  │
  2026-01-19 15:30:00
  │ 用户确认: 85% → 100%
  │ 用户确认原则正确
  │
------------------------------------------------------------
```

**事件详情格式：**
```
事件 ID: evt-12345678
时间: 2026-01-19 15:30:00
类型: 用户确认 (user_confirm)
原则 ID: abc123ef

置信度变化: 85% → 100%

备注:
  用户通过 /as-me:principles confirm 命令确认
```
